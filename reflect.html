<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Reflect 🌞📅</title>
  <style>
    body {
      font-family: "Trebuchet MS", sans-serif;
      background: linear-gradient(135deg, #ffafbd, #ffc3a0, #a1c4fd, #c2e9fb);
      background-size: 400% 400%;
      animation: gradientBG 12s ease infinite;
      margin: 0; padding: 20px;
      color: #333;
    }
    @keyframes gradientBG {
      0% {background-position: 0% 50%;}
      50% {background-position: 100% 50%;}
      100% {background-position: 0% 50%;}
    }
    h1 {
      text-align: center;
      color: #ff1493;
      font-size: 2.7em;
      margin-bottom: 10px;
      text-shadow: 2px 2px #fff;
    }
    h2 {
      text-align: center;
      color: #444;
      margin-top: 0;
      font-weight: normal;
    }
    .container {
      max-width: 700px;
      margin: auto;
      background: #ffffffcc;
      padding: 25px;
      border-radius: 18px;
      box-shadow: 0 5px 15px rgba(0,0,0,0.2);
    }
    label {
      font-size: 1.2em;
      margin-bottom: 10px;
      display: block;
      font-weight: bold;
    }
    textarea {
      width: 100%;
      height: 120px;
      padding: 12px;
      border-radius: 12px;
      border: 2px solid #ff69b4;
      font-size: 1em;
      margin-bottom: 15px;
      background: #fff8fb;
    }
    button {
      background: linear-gradient(45deg, #ff69b4, #ff1493);
      border: none;
      padding: 14px;
      border-radius: 14px;
      cursor: pointer;
      font-weight: bold;
      color: white;
      transition: 0.3s;
      font-size: 1.1em;
      display: block;
      margin: 10px auto;
      box-shadow: 0 4px 8px rgba(0,0,0,0.2);
    }
    button:hover {
      background: linear-gradient(45deg, #ff1493, #c71585);
      transform: scale(1.08);
    }
    .output {
      margin-top: 20px;
      padding: 20px;
      background: #e6f7ff;
      border-radius: 14px;
      font-size: 1.2em;
      line-height: 1.6;
      text-align: center;
      box-shadow: 0 3px 10px rgba(0,0,0,0.1);
    }
    .quote {
      font-style: italic;
      color: #333;
      margin-top: 15px;
      font-weight: bold;
    }
    .music-controls {
      text-align: center;
      margin-top: 20px;
    }
  </style>
</head>
<body>
  <h1>Reflect 🌞📅</h1>
  <h2>📝 Share your day, receive wisdom 💡</h2>

  <div class="container">
    <label for="dayInput">How was your day today? 🌼</label>
    <textarea id="dayInput" placeholder="Write about your day here..."></textarea>
    <button onclick="reflectDay()">✨ Reflect & Get Quote ✨</button>
    <button onclick="saveReflection()">💾 Save My Reflection</button>

    <div id="output" class="output"></div>
  </div>

  <!-- 🎶 Theme Music -->
  <div class="music-controls">
    <p>🎵 Enjoy the theme song while you reflect:</p>
    <audio id="themeMusic" controls loop>
      <source src="https://cdn.pixabay.com/download/audio/2023/05/17/audio_4d7cfbde09.mp3?filename=happy-day-14839.mp3" type="audio/mpeg">
      Your browser does not support the audio element.
    </audio>
  </div>

<script>
let lastReflection = "";

// Categories with 10 quotes each (same as before, shortened here for brevity)
const quoteCategories = {
  kindness: [
    "🌸 Kindness is free, sprinkle it everywhere. 🌸",
    "💕 Love and compassion are never wasted; they always make a difference. 💕",
    "🕊️ Peace begins with a smile and a kind word. 🕊️",
    "🤝 Helping one person might not change the world, but it could change theirs. 💖",
    "🥰 Compassion is the heartbeat of humanity. 🥰",
    "🌻 Kindness costs nothing but means everything. 🌻",
    "🪷 A little spark of kindness can ignite a great flame of love. 🪷",
    "🎁 Be kind whenever possible; it is always possible. 🎁",
    "🍯 A gentle word is like honey, sweet to the soul. 🍯",
    "🌙 Kindness is a language the deaf can hear and the blind can see. 🌙"
  ],
  optimism: [
    "🌞 Even the darkest night will end, and the sun will rise. 🌞",
    "🌈 Optimism is a choice that creates its own reality. 🌈",
    "🔥 Strength comes not from what you can do, but from what you thought you couldn’t. 🔥",
    "🦋 Change is hard at first, messy in the middle, and beautiful at the end. 🦋",
    "🌟 Be the reason someone believes in goodness today. 🌟",
    "🌻 Always believe something wonderful is about to happen. 🌻",
    "💫 Stay close to anything that makes you glad you are alive. 💫",
    "🌊 A smooth sea never made a skilled sailor. 🌊",
    "🌹 Where flowers bloom, so does hope. 🌹",
    "🌍 Optimism is faith that leads to achievement. 🌍"
  ],
  // ... (stoicism, fairness, love unchanged for brevity)
};

function getWeightedQuote(text) {
  const lower = text.toLowerCase();
  let chosenCategory = "optimism"; 

  if (lower.match(/friend|family|love|kind|help/)) {
    chosenCategory = "kindness";
  } else if (lower.match(/sad|tired|hard|struggle|stress/)) {
    chosenCategory = "optimism";
  } else if (lower.match(/work|time|fair|patience|wait/)) {
    chosenCategory = "stoicism";
  } else if (lower.match(/justice|equal|fair|humble/)) {
    chosenCategory = "fairness";
  } else if (lower.match(/happy|joy|fun|wonder|life/)) {
    chosenCategory = "love";
  }

  const pool = quoteCategories[chosenCategory];
  return pool[Math.floor(Math.random() * pool.length)];
}

function reflectDay() {
  const dayInput = document.getElementById("dayInput").value.trim();
  const output = document.getElementById("output");

  if (!dayInput) {
    output.innerHTML = "⚠️ Please tell me a little about your day first 🌷";
    return;
  }

  const randomQuote = getWeightedQuote(dayInput);
  lastReflection = `Your reflection:\n"${dayInput}"\n\nMotivational Quote:\n${randomQuote}`;

  output.innerHTML = `
    🌼 You shared: <br><br>
    "<b>${dayInput}</b>" <br><br>
    💡 Here's a thought for you: <br>
    <div class="quote">"${randomQuote}"</div>
  `;
}

function saveReflection() {
  if (!lastReflection) {
    alert("✨ Please reflect on your day first before saving 🌼");
    return;
  }
  const blob = new Blob([lastReflection], { type: "text/plain" });
  const link = document.createElement("a");
  link.href = URL.createObjectURL(blob);
  link.download = "My_Daily_Reflection.txt";
  link.click();
}
</script>
</body>
</html>
